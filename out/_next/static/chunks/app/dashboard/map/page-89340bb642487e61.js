(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{381:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1007:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2069:(e,t,s)=>{Promise.resolve().then(s.bind(s,8727))},2188:(e,t,s)=>{"use strict";s.d(t,{N:()=>A});var a=s(5155),r=s(2115),l=s(6874),i=s.n(l),n=s(5695),d=s(7168),c=s(3783),o=s(4516),h=s(2970),u=s(3314),m=s(4213),x=s(2292),p=s(7213),f=s(9588),g=s(381),y=s(3311),b=s(1007),v=s(4835),j=s(4416),k=s(4783),N=s(3999),w=s(1886);function A(e){let{children:t}=e,s=(0,n.usePathname)(),l=(0,n.useRouter)(),[A,S]=(0,r.useState)({}),[M,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await w.u.getSessionUser();e.data&&S(e.data)}catch(e){console.error("Error fetching users:",e)}})()},[]);let z=[{name:"Dashboard",href:"/dashboard",icon:c.A},{name:"Map",href:"/dashboard/map",icon:o.A},{name:"Connections",href:"/dashboard/connections",icon:h.A},{name:"Models",href:"/dashboard/models",icon:u.A},{name:"Knowledge",href:"/dashboard/knowledge",icon:m.A},{name:"Integrations",href:"/integrations",icon:x.A},{name:"Images",href:"/dashboard/images",icon:p.A},{name:"Audio",href:"/dashboard/audio",icon:f.A},{name:"Settings",href:"/dashboard/settings",icon:g.A}],E=()=>{w.u.logout(),l.push("/auth/login")};return(0,a.jsxs)("div",{className:"min-h-screen flex",children:[(0,a.jsx)("aside",{className:"hidden lg:flex lg:flex-col lg:w-64 glass-strong border-r border-primary/20 fixed h-screen",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col p-6 space-y-6",children:[(0,a.jsxs)(i(),{href:"/dashboard",className:"flex items-center gap-3 group",children:[(0,a.jsx)("div",{className:"p-2 glass rounded-lg border border-primary/30 group-hover:border-primary/50 transition-all",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-primary"})}),(0,a.jsx)("span",{className:"text-xl font-bold neon-text",children:"JARVIS"})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1",children:z.map(e=>{let t=s===e.href;return(0,a.jsx)(i(),{href:e.href,children:(0,a.jsxs)(d.$,{variant:"ghost",className:(0,N.cn)("w-full justify-start gap-3 hover:bg-primary/10 hover:text-primary transition-all",t&&"bg-primary/20 text-primary neon-glow"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),e.name]})},e.name)})}),(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t border-border/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 glass rounded-lg border border-primary/20",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:(0,a.jsx)(b.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:A.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:A.email})]})]}),(0,a.jsxs)(d.$,{variant:"outline",className:"w-full glass border-destructive/30 text-destructive hover:bg-destructive/10 bg-transparent",onClick:E,children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),M&&(0,a.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm",onClick:()=>_(!1)}),(0,a.jsxs)("aside",{className:"absolute left-0 top-0 bottom-0 w-64 glass-strong border-r border-primary/20 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i(),{href:"/dashboard",className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 glass rounded-lg border border-primary/30",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-primary"})}),(0,a.jsx)("span",{className:"text-xl font-bold neon-text",children:"JARVIS"})]}),(0,a.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>_(!1),children:(0,a.jsx)(j.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("nav",{className:"space-y-1",children:z.map(e=>{let t=s===e.href;return(0,a.jsx)(i(),{href:e.href,onClick:()=>_(!1),children:(0,a.jsxs)(d.$,{variant:"ghost",className:(0,N.cn)("w-full justify-start gap-3 hover:bg-primary/10 hover:text-primary transition-all",t&&"bg-primary/20 text-primary neon-glow"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),e.name]})},e.name)})}),(0,a.jsx)("div",{className:"absolute bottom-6 left-6 right-6",children:(0,a.jsxs)(d.$,{variant:"outline",className:"w-full glass border-destructive/30 text-destructive hover:bg-destructive/10 bg-transparent",onClick:E,children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Logout"]})})]})]}),(0,a.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,a.jsx)("header",{className:"lg:hidden sticky top-0 z-40 glass-strong border-b border-primary/20 p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>_(!0),children:(0,a.jsx)(k.A,{className:"w-5 h-5"})}),(0,a.jsxs)(i(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("span",{className:"font-bold neon-text",children:"JARVIS"})]}),(0,a.jsx)("div",{className:"w-10"})]})}),(0,a.jsx)("main",{className:"p-6 lg:p-8",children:t})]})]})}},2292:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("ToyBrick",[["rect",{width:"18",height:"12",x:"3",y:"8",rx:"1",key:"158fvp"}],["path",{d:"M10 8V5c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v3",key:"s0042v"}],["path",{d:"M19 8V5c0-.6-.4-1-1-1h-3a1 1 0 0 0-1 1v3",key:"9wmeh2"}]])},2970:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]])},3314:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},3783:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},4213:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4783:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},4835:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},7213:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7365:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});var a=s(5155),r=s(2115),l=s(5695),i=s(1886);function n(e){let{children:t}=e,s=(0,l.useRouter)(),[n,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=localStorage.getItem("authToken");e?(i.u.setToken(e),d(!0)):s.push("/auth/login")},[s]),n)?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:"Authenticating..."})]})})}},8145:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var a=s(5155);s(2115);var r=s(9708),l=s(2085),i=s(3999);let n=(0,l.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,asChild:l=!1,...d}=e,c=l?r.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(n({variant:s}),t),...d})}},8727:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(7365),l=s(2188),i=s(2115),n=s(8482),d=s(7168),c=s(8145),o=s(1886);let h=e=>e.split(".")[0],u=()=>{let[e,t]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),[n,u]=(0,i.useState)(null),[m,x]=(0,i.useState)(null),[p,f]=(0,i.useState)(null),[g,y]=(0,i.useState)(null),[b,v]=(0,i.useState)([]),[j,k]=(0,i.useState)({}),[N,w]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{{let e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(e);let t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.jsdelivr.net/npm/leaflet-defaulticon-compatibility@0.1.2/dist/leaflet-defaulticon-compatibility.css",document.head.appendChild(t)}let e=await s.e(761).then(s.t.bind(s,5752,23));y(()=>e.default);let a=await Promise.all([s.e(761),s.e(712)]).then(s.bind(s,9712));t(()=>a.MapContainer),l(()=>a.TileLayer),u(()=>a.Marker),x(()=>a.Popup),f(()=>a.useMap)}catch(e){console.error("Error loading Leaflet components:",e)}})()},[]),(0,i.useEffect)(()=>{let t=async()=>{try{w(!0);let e=await o.u.getHomeAssistantEntities();if(e.success&&e.data){let t=e.data.map(e=>({entity_id:e.entity_id,state:e.state,attributes:e.attributes||{},last_changed:e.last_changed||new Date().toISOString(),last_updated:e.last_updated||new Date().toISOString()}));v(t);let s={};t.forEach(e=>{e.attributes.latitude&&e.attributes.longitude&&(s[e.entity_id]=[e.attributes.latitude,e.attributes.longitude])}),k(s)}}catch(e){console.error("Error fetching Home Assistant entities:",e)}finally{w(!1)}};if(e){t();let e=setInterval(t,3e4);return()=>clearInterval(e)}},[e]);let A=e=>{if(!g)return null;let t="https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png";return"on"===e.state||"home"===e.state?t="https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png":("off"===e.state||"not_home"===e.state)&&(t="https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png"),new g.Icon({iconUrl:t,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})};return e&&r&&n&&m&&g?(0,a.jsxs)(e,{center:[12.89836,77.61795],zoom:13,scrollWheelZoom:!0,style:{height:"100%",width:"84%"},className:"h-full absolute right-0 top-0 bottom-0 w-4/5",children:[(0,a.jsx)(()=>{if(!p)return null;let e=p();return(0,i.useEffect)(()=>{setTimeout(()=>{e.invalidateSize()},100)},[e]),null},{}),(0,a.jsx)(r,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object.entries(j).map(e=>{let[t,s]=e,r=b.find(e=>e.entity_id===t);return r?(0,a.jsx)(n,{position:s,icon:A(r),children:(0,a.jsx)(m,{children:(0,a.jsxs)("div",{className:"min-w-48",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:r.attributes.friendly_name||t}),(0,a.jsx)(c.E,{variant:"on"===r.state||"home"===r.state?"default":"secondary",children:r.state})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:h(t)}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,a.jsx)("span",{className:"font-medium",children:"Last changed:"}),(0,a.jsx)("span",{children:new Date(r.last_changed).toLocaleTimeString()}),(0,a.jsx)("span",{className:"font-medium",children:"Last updated:"}),(0,a.jsx)("span",{children:new Date(r.last_updated).toLocaleTimeString()})]}),r.attributes.battery_level&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("span",{className:"text-xs",children:["Battery: ",r.attributes.battery_level,"%"]})}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>{o.u.callHomeAssistantService(h(t),"turn_on",{entity_id:t})},children:"Turn On"}),(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>{o.u.callHomeAssistantService(h(t),"turn_off",{entity_id:t})},children:"Turn Off"})]})]})})},t):null})]}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map components..."})]})})};function m(){let[e,t]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{t(!0)},[]),e)?(0,a.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,a.jsx)(n.Zp,{className:"flex-1 border-0 rounded-none",children:(0,a.jsx)(n.Wu,{className:"p-0 h-full",children:(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})}),children:(0,a.jsx)(u,{})})})})}):(0,a.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,a.jsx)(n.Zp,{className:"flex-1 border-0 rounded-none",children:(0,a.jsx)(n.Wu,{className:"p-0 h-full",children:(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})})})})})}function x(){return(0,a.jsx)(r.q,{children:(0,a.jsx)(l.N,{children:(0,a.jsx)(m,{})})})}},9588:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[817,796,576,441,684,358],()=>t(2069)),_N_E=e.O()}]);